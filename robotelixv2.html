<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Robot Eilik V7 - AI Voice Response</title>
<style>
  body {
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#88dfff;
    font-family:sans-serif;
  }

  .robot-face {
    width: 330px;
    height: 260px;
    background: #000;
    border-radius: 45%;
    position: relative;
    display:flex;
    align-items:center;
    justify-content:center;
    animation: idle 4s ease-in-out infinite;
    box-shadow: 0 0 40px rgba(0,0,0,0.5),
                inset 0 0 40px rgba(0,255,255,0.15);
  }

  @keyframes idle {
    0% { transform:translateY(0); }
    50% { transform:translateY(-6px); }
    100% { transform:translateY(0); }
  }

  .eye {
    position:absolute;
    width:85px;
    height:55px;
    background:#2df6ff;
    border-radius: 60px 60px 35px 35px;
    filter:drop-shadow(0 0 14px #2df6ff);
    transition: .3s ease;
    animation: blink 5s infinite;
  }
  .eye.left { left:70px; top:90px; }
  .eye.right { right:70px; top:90px; }

  .eye::after {
    content:"";
    position:absolute;
    width:18px;
    height:10px;
    background:white;
    opacity:0.8;
    top:10px;
    left:38px;
    border-radius:50%;
  }

  @keyframes blink {
    0%, 92%, 100% { transform:scaleY(1); }
    95% { transform:scaleY(0.1); }
  }

  .mouth {
    position:absolute;
    top:160px;
    left:50%;
    transform:translateX(-50%);
    width:80px;
    height:35px;
    border-bottom:6px solid #2df6ff;
    border-radius:0 0 60px 60px;
    filter:drop-shadow(0 0 12px #2df6ff);
    transition:0.1s ease;
  }

  .talking {
    animation: talk 0.14s infinite;
  }

  @keyframes talk {
    0% { transform:translateX(-50%) scaleY(1); }
    50% { transform:translateX(-50%) scaleY(0.4); }
    100% { transform:translateX(-50%) scaleY(1); }
  }

  .sleep {
    background:#001012 !important;
  }
</style>
</head>
<body>

<div class="robot-face" id="face">
  <div class="eye left" id="eyeL"></div>
  <div class="eye right" id="eyeR"></div>
  <div class="mouth" id="mouth"></div>
</div>

<script>
/* ================================
      AI MINI – RESPONSE SYSTEM
================================= */
function aiGenerate(text) {
  text = text.toLowerCase();

  if (text.includes("halo")) 
    return "Halo! Aku di sini.";
  if (text.includes("siapa kamu"))
    return "Aku adalah robot Eilik versimu, lucu dan pintar.";
  if (text.includes("apa kabar"))
    return "Aku baik! Sistem energiku penuh.";
  if (text.includes("imut"))
    return "Terima kasih! Aku memang didesain super imut.";
  if (text.includes("marah"))
    return "Aku tidak marah, tapi aku bisa pura pura marah. Hmph!";
  if (text.includes("mode")) 
    return "Mode sistem diganti. Semua fungsi stabil.";
  if (text.includes("kaget"))
    return "Waaaa!! Kamu bikin aku kaget!";
  
  // Default jawaban AI
  return "Oke, aku mengerti. Ada lagi yang bisa kubantu?";
}

/* ================================
      TEXT TO SPEECH — SUARA ROBOT
================================= */
function speak(text) {
  const mouth = document.getElementById("mouth");
  const msg = new SpeechSynthesisUtterance(text);

  /* Suara robot */
  msg.pitch = 1.8;      // lebih cempreng & robotik
  msg.rate = 1.05;      // ritme natural robot
  msg.volume = 1;

  // Cari voice yang paling robot
  const voices = speechSynthesis.getVoices();
  const robo = voices.find(v => 
      v.name.toLowerCase().includes("google") ||
      v.name.toLowerCase().includes("female") ||
      v.name.toLowerCase().includes("male")
  );
  if (robo) msg.voice = robo;

  msg.onstart = () => mouth.classList.add("talking");
  msg.onend   = () => mouth.classList.remove("talking");

  speechSynthesis.speak(msg);
}

/* ================================
        VOICE COMMAND
================================= */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recog = new SpeechRecognition();
recog.lang = "id-ID";
recog.continuous = true;

let sleepmode = false;

function handleCommand(text) {
  text = text.toLowerCase();

  /* WAKEWORD */
  if (text.includes("eilik bangun")) {
    sleepmode = false;
    document.getElementById("face").classList.remove("sleep");
    speak("Aku bangun! Ada apa?");
    return;
  }

  if (sleepmode) return;

  /* SLEEP MODE */
  if (text.includes("tidur")) {
    sleepmode = true;
    document.getElementById("face").classList.add("sleep");
    speak("Oke, aku tidur dulu.");
    return;
  }

  /* AI JAWABAN */
  const response = aiGenerate(text);
  speak(response);
}

recog.onresult = e => {
  const t = e.results[e.resultIndex][0].transcript;
  handleCommand(t);
};

recog.start();
</script>

</body>
</html>